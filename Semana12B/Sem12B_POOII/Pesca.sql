USE MASTER
GO

If exists(select * from sysdatabases where name = 'PESCA')
Begin
	DROP DATABASE PESCA
End

CREATE DATABASE PESCA
GO

USE PESCA
GO

CREATE TABLE TB_TIPO_BARCO(
    TIP_BAR		CHAR(02) NOT NULL PRIMARY KEY,
    NOM_TIP		VARCHAR(100)
)

CREATE TABLE TB_TIPO_PRODUCTO(
	TIP_PRO		CHAR(02) NOT NULL PRIMARY KEY,
	NOM_TIP		VARCHAR(100)
)

CREATE TABLE TB_ESTADO_CIVIL(
    EST_CIVIL	CHAR(1) NOT NULL PRIMARY KEY,
    NOM_EST		VARCHAR(100)
)

CREATE TABLE TB_CATEGORIA_EMPLEADO(
	CAT_EMPLEADO  CHAR(5) NOT NULL PRIMARY KEY,
	NOM_CATEGORIA VARCHAR(100)
)

CREATE	TABLE TB_BARCO(
	COD_BAR		CHAR(5)  NOT NULL PRIMARY KEY,
	NOM_BAR		VARCHAR(100),
	FEC_COM		DATETIME,
	TIP_BAR		CHAR(02) REFERENCES TB_TIPO_BARCO,
	CAP_BAR		INT
)

CREATE TABLE TB_EMPLEADO(
	COD_EMP		 CHAR(10)  NOT NULL PRIMARY KEY,
	NOM_EMP		 VARCHAR(100),
	APE_PAT		 VARCHAR(100),
	APE_MAT		 VARCHAR(100),
	FEC_NAC		 DATETIME,
	FEC_ING		 DATETIME,
	LIB_ELE		 VARCHAR(8),
	EST_CIVIL	 CHAR(1) REFERENCES TB_ESTADO_CIVIL,
	HAB_BAS		 DECIMAL(8,2),	
	CAT_EMPLEADO CHAR(5) REFERENCES TB_CATEGORIA_EMPLEADO
)

CREATE TABLE TB_FAENA(
	NUM_FAE		CHAR(5) NOT NULL PRIMARY KEY,
	FEC_INI		DATETIME,
	FEC_FIN		DATETIME,
	ZON_MAR		VARCHAR(100),
	COD_BAR		CHAR(5) REFERENCES TB_BARCO
)

CREATE TABLE TB_ESPECIE(
	COD_ESP		INTEGER NOT NULL PRIMARY KEY,
	NOM_ESP		VARCHAR(100),
	PRE_ESP		DECIMAL(16,2)
)

CREATE TABLE TB_PRODUCTO(
	COD_PRO		INTEGER NOT NULL PRIMARY KEY,
	DES_PRO		VARCHAR(100),
	TIP_PRO		CHAR(02) NOT NULL REFERENCES TB_TIPO_PRODUCTO,
	PRE_PRO		NUMERIC(6,2)
)

CREATE TABLE TB_DETALLE_FAENA(
	NUM_FAE		CHAR(5) NOT NULL REFERENCES TB_FAENA,
	COD_ESP		INTEGER NOT NULL REFERENCES TB_ESPECIE,
	CAN_FAE		INTEGER,
	PRIMARY KEY (NUM_FAE, COD_ESP)
)

CREATE TABLE TB_DETALLE_PRODUCTO(
	COD_PRO		INTEGER NOT NULL REFERENCES TB_PRODUCTO,
	COD_ESP		INTEGER NOT NULL REFERENCES TB_ESPECIE,
	CAN_PRO		INT,
	PRIMARY KEY (COD_PRO, COD_ESP)
)

CREATE TABLE TB_FAENA_EMPLEADO(
	NUM_FAE		CHAR(5) NOT NULL REFERENCES TB_FAENA,
	COD_EMP		CHAR(10)NOT NULL REFERENCES TB_EMPLEADO,
	PRIMARY KEY (NUM_FAE, COD_EMP)
)

SET DATEFORMAT dmy
GO

USE PESCA
GO

/* BORRAR LOS DATOS */
delete from TB_FAENA_EMPLEADO
GO

delete from TB_DETALLE_FAENA
GO

delete from TB_DETALLE_PRODUCTO
GO

delete from TB_PRODUCTO
GO

delete from TB_ESPECIE
GO

delete from TB_FAENA
GO

delete from TB_EMPLEADO
GO

delete from TB_BARCO
GO

delete from TB_TIPO_BARCO
GO

delete from TB_ESTADO_CIVIL
GO

delete from TB_CATEGORIA_EMPLEADO
GO

delete from TB_TIPO_PRODUCTO
GO

/* 00: INGRESAR LOS TIPOS DE BARCO */
INSERT INTO TB_TIPO_BARCO(
    TIP_BAR,
    NOM_TIP
)
Select '01','VELERO'
Union
Select '02','YATE'
Union
Select '03','LANCHA'

INSERT INTO TB_ESTADO_CIVIL(
    EST_CIVIL,
    NOM_EST
)
Select '1','SOLTERO'
Union
Select '2','CASADO'
Union
Select '3','VIUDO'
Union
Select '4','DIVORCIADO'

INSERT INTO TB_CATEGORIA_EMPLEADO(
	CAT_EMPLEADO,
	NOM_CATEGORIA
)
Select '00001','CAPITAN'
Union
Select '00002','PATRON'
Union
Select '00003','TRIPULANTE'
Union
Select '00004','COCINERO'

INSERT INTO TB_TIPO_PRODUCTO(
	TIP_PRO,
	NOM_TIP
)
SELECT '01','CONSERVA'
UNION
SELECT '02','ACEITE'
UNION
SELECT '03','HARINA'


/* 01: INGRESAR LOS DATOS DEL BARCO */
INSERT INTO TB_BARCO(
	COD_BAR,
	NOM_BAR,
	FEC_COM,
	TIP_BAR,
	CAP_BAR
)
Select	'00001',
	'SOL',
	'02/05/1990',
	'01',
	20
UNION
Select	'00002',
	'LUNA',
	'05/04/1998',
	'03',
	50
UNION
Select	'00003',
	'GARFIELD',
	'05/04/2005',
	'01',
	80
UNION
Select	'00004',
	'HORIZONTE',
	'23/11/2003',
	'02',
	70
UNION
Select	'00005',
	'PLUTON',
	'23/10/2007',
	'02',
	30
UNION
Select	'00006',
	'200 MILLAS',
	'15/11/1999',
	'03',
	80
UNION
Select	'00007',
	'EL ECLIPSE',
	'15/08/2004',
	'03',
	90
UNION
Select	'00008',
	'MAGNUS',
	'15/09/2007',
	'03',
	120
UNION
Select	'00009',
	'DSL MAC',
	'15/08/2009',
	'03',
	70
UNION
Select	'00010',
	'PALAS',
	'15/09/2007',
	'03',
	10
GO

/* 02: INGRESAR LOS DATOS DEL EMPLEADO */
INSERT INTO TB_EMPLEADO(
	COD_EMP,
	NOM_EMP,
	APE_PAT,
	APE_MAT,
	FEC_NAC,
	FEC_ING,
	LIB_ELE,
	EST_CIVIL,
	HAB_BAS,
	CAT_EMPLEADO
)
Select	'0000000001',
	'JAIME',
	'NICOLL',
	'VILLAVICENCIO',
	'24/11/1987',
	'05/10/2006',
	'10625312',
	'1',
	'820.00',
	'00001'
UNION
Select	'0000000002',
	'ERICK',
	'PEREZ',
	'VALDIVIA',
	'18/12/1988',
	'05/10/2009',
	'10622520',
	'1',
	'630.00',
	'00003'
UNION
Select	'0000000003',
	'CARLOS',
	'SOTO',
	'QUINTANA',
	'18/12/1987',
	'01/05/2006',
	'10822820',
	'2',
	'780.00',
	'00003'
UNION
Select	'0000000004',
	'ENRIQUE',
	'SILVA',
	'PAJUELO',
	'18/12/1982',
	'01/09/2002',
	'09822820',
	'2',
	'680.00',
	'00003'
UNION
Select	'0000000005',
	'CARLOS',
	'VALDERRAMA',
	'SOTELO',
	'16/06/1982',
	'01/10/2006',
	'07822820',
	'1',
	'650.00',
	'00003'
UNION
Select	'0000000006',
	'ALFREDO',
	'VERA',
	'POMEZ',
	'14/06/1988',
	'01/08/2006',
	'11822820',
	'1',
	'700.00',
	'00004'
UNION
Select	'0000000007',
	'LUIS',
	'LLANOS',
	'PEREDA',
	'14/03/1981',
	'01/02/2002',
	'10922820',
	'2',
	'630.00',
	'00002'
UNION
Select	'0000000008',
	'CARLOS',
	'VALDERRAMA',
	'TORRES',
	'16/06/1980',
	'01/09/2007',
	'08992820',
	'2',
	'630.00',
	'00002'
UNION
Select	'0000000009',
	'ESTHER',
	'JULCA',
	'JIMENEZ',
	'16/06/1979',
	'01/11/1998',
	'06892820',
	'2',
	'830.00',
	'00001'
UNION
Select	'0000000010',
	'VICTOR',
	'HERRERA',
	'RODRIGUEZ',
	'15/11/1975',
	'01/08/2002',
	'06892550',
	'2',
	'680.00',
	'00003'
UNION
Select	'0000000011',
	'CARLOS',
	'ULLOA',
	'PALACIOS',
	'15/10/1978',
	'01/11/2003',
	'07892599',
	'2',
	'510.00',
	'00003'
UNION
Select	'0000000012',
	'JHON',
	'ULLOA',
	'PEREDA',
	'15/08/1975',
	'01/02/2004',
	'05592566',
	'1',
	'680.00',
	'00003'
UNION
Select	'0000000013',
	'MANUEL',
	'PEREZ',
	'CHISCUL',
	'11/08/1987',
	'01/03/2006',
	'08893366',
	'1',
	'680.00',
	'00003'
UNION
Select	'0000000014',
	'ANGELA',
	'HINOSTROZA',
	'CHISCUL',
	'18/08/1979',
	'01/02/2007',
	'09892566',
	'1',
	'680.00',
	'00001'
UNION
Select	'0000000015',
	'MARIA',
	'PALOMINO',
	'TISANO',
	'18/11/1980',
	'01/05/2007',
	'07792566',
	'1',
	'880.00',
	'00002'
UNION
Select	'0000000016',
	'LUIS',
	'GARCIA',
	'LLANOS',
	'12/11/1980',
	'01/04/2003',
	'06692577',
	'1',
	'880.00',
	'00004'
UNION
Select	'0000000017',
	'ENRIQUE',
	'QUISPE',
	'POMA',
	'03/08/1987',
	'01/02/2005',
	'10628807',
	'1',
	'780.00',
	'00003'
UNION
Select	'0000000018',
	'ROGER',
	'GUILLEN',
	'QUIROZ',
	'03/08/1989',
	'01/05/2009',
	'10623311',
	'2',
	'780.00',
	'00003'
UNION
Select	'0000000019',
	'LUIS',
	'PASOS',
	'CHOCANO',
	'03/11/1988',
	'01/05/2007',
	'11778811',
	'2',
	'780.00',
	'00003'
UNION
Select	'0000000020',
	'ANTONIO',
	'AYALA',
	'VILCHEZ',
	'03/04/1989',
	'01/06/2006',
	'10559911',
	'2',
	'690.00',
	'00003'

GO

/* 03: INGRESAR LOS DATOS DE LA FAENA */
INSERT INTO TB_FAENA(
	NUM_FAE,
	FEC_INI,
	FEC_FIN,
	ZON_MAR,
	COD_BAR
)
SELECT	'00001',
	'01/04/2008',
	'03/04/2008',
	'ALTA MAR',
	'00001'
UNION
SELECT	'00002',
	'05/05/2008',
	'06/06/2008',
	'POR LA BAHIA',
	'00001'
UNION
SELECT	'00003',
	'11/06/2009',
	'12/07/2009',
	'A 100 m. de la Costa',
	'00002'
UNION
SELECT	'00004',
	'18/10/2008',
	'20/12/2008',
	'A 200 m. de la Costa',
	'00003'
UNION
SELECT	'00005',
	'11/06/2009',
	'12/07/2009',
	'A 100 m. de la Costa',
	'00003'
UNION
SELECT	'00006',
	'01/04/2009',
	'03/04/2009',
	'ALTA MAR',
	'00003'
UNION
SELECT	'00007',
	'05/05/2008',
	'06/06/2008',
	'POR LA BAHIA',
	'00004'
UNION
SELECT	'00008',
	'18/10/2008',
	'20/12/2008',
	'A 500 m. de la Costa',
	'00004'
UNION
SELECT	'00009',
	'10/11/2008',
	'15/12/2008',
	'A 100 m. de la Costa',
	'00005'
UNION
SELECT	'00010',
	'19/11/2008',
	'23/12/2008',
	'A 500 m. de la Costa',
	'00006'
UNION
SELECT	'00011',
	'19/03/2009',
	'23/04/2009',
	'A 300 m. de la Costa',
	'00007'
UNION
SELECT	'00012',
	'19/05/2009',
	'23/06/2009',
	'A 800 m. de la Costa',
	'00007'
UNION
SELECT	'00013',
	'19/07/2009',
	'23/08/2009',
	'A 800 m. de la Costa',
	'00007'


/* 04: INGRESAR LOS DATOS DE LAS ESPECIES */
INSERT INTO TB_ESPECIE(	
	COD_ESP,
	NOM_ESP,
	PRE_ESP
)
SELECT	1,
	'BACALAO',
	'6.00'
UNION
SELECT	2,
	'BACORETA',
	'8.00'
UNION
SELECT	3,
	'BONITO',
	'6.00'
UNION
SELECT	4,
	'BORRACHO',
	'7.00'
UNION
SELECT	5,
	'CABALLA',
	'8.00'
UNION
SELECT	6,
	'BACORETA',
	'8.00'
UNION
SELECT	7,
	'CHOPA',
	'7.00'
UNION
SELECT	8,
	'CORVINA',
	'10.00'
UNION
SELECT	9,
	'JUREL',
	'3.00'
UNION
SELECT	10,
	'LENGUADO',
	'15.00'
UNION
SELECT	11,
	'LISA',
	'5.00'
UNION
SELECT	12,
	'MERO',
	'15.00'
UNION
SELECT	13,
	'PEJERREY',
	'4.00'
UNION
SELECT	14,
	'RAYA',
	'10.00'
UNION
SELECT	15,
	'SALMON',
	'12.00'
UNION
SELECT	16,
	'ATUN',
	'5.00'
GO

/* 05: INGRESAR LOS DATOS DEL DETALLE DE LA FAENA */

INSERT INTO TB_DETALLE_FAENA(
	NUM_FAE,
	COD_ESP,
	CAN_FAE
)
SELECT	'00001',
	1,
	500
UNION
SELECT	'00001',
	2,
	600
UNION
SELECT	'00001',
	10,
	300
UNION
SELECT	'00001',
	12,
	180
UNION
SELECT	'00001',
	15,
	200
UNION
SELECT	'00002',
	3,
	500
UNION
SELECT	'00002',
	4,
	200
UNION
SELECT	'00002',
	6,
	180
UNION
SELECT	'00002',
	8,
	200
UNION
SELECT	'00003',
	1,
	150
UNION
SELECT	'00003',
	5,
	50
UNION
SELECT	'00003',
	10,
	400
UNION
SELECT	'00003',
	15,
	600
UNION

SELECT	'00004',
	6,
	50
UNION
SELECT	'00004',
	8,
	150
UNION
SELECT	'00004',
	12,
	500
UNION
SELECT	'00004',
	15,
	400
UNION
SELECT	'00005',
	3,
	100
UNION
SELECT	'00005',
	8,
	180
UNION
SELECT	'00005',
	9,
	400
UNION
SELECT	'00005',
	14,
	600

UNION
SELECT	'00006',
	2,
	80
UNION
SELECT	'00006',
	7,
	120
UNION
SELECT	'00006',
	8,
	300
UNION
SELECT	'00006',
	10,
	400
UNION
SELECT	'00007',
	4,
	80
UNION
SELECT	'00007',
	9,
	120
UNION
SELECT	'00007',
	10,
	300
UNION
SELECT	'00007',
	13,
	400
UNION
SELECT	'00008',
	2,
	30
UNION
SELECT	'00008',
	7,
	70
UNION
SELECT	'00008',
	9,
	180
UNION
SELECT	'00008',
	13,
	120
UNION
SELECT	'00009',
	1,
	70
UNION
SELECT	'00009',
	2,
	180
UNION
SELECT	'00009',
	3,
	120
UNION
SELECT	'00009',
	4,
	120
UNION
SELECT	'00010',
	5,
	70
UNION
SELECT	'00010',
	6,
	180
UNION
SELECT	'00010',
	7,
	120
UNION
SELECT	'00010',
	8,
	120
UNION
SELECT	'00010',
	9,
	120
UNION
SELECT	'00011',
	5,
	80
UNION
SELECT	'00011',
	6,
	90
UNION
SELECT	'00011',
	7,
	130
UNION
SELECT	'00011',
	8,
	150
UNION
SELECT	'00011',
	9,
	80
UNION
SELECT	'00012',
	1,
	80
UNION
SELECT	'00012',
	2,
	90
UNION
SELECT	'00012',
	3,
	130
UNION
SELECT	'00012',
	4,
	150
UNION
SELECT	'00012',
	5,
	80
UNION
SELECT	'00013',
	6,
	90
UNION
SELECT	'00013',
	7,
	130
UNION
SELECT	'00013',
	8,
	150
UNION
SELECT	'00013',
	9,
	80


GO


/* 06: INGRESAR LOS DATOS DE LOS PRODUCTOS */

INSERT INTO TB_PRODUCTO(	
	COD_PRO,
	DES_PRO,
	TIP_PRO,
	PRE_PRO
)
SELECT	1,
	'HARINA PESCADO',
	'03',
	1.00
UNION
SELECT	2,
	'ACEITE',
	'02',
	1.50
UNION
SELECT	3,
	'LUBRICANTE',
	'02',
	8.00
UNION
SELECT	4,
	'CONSERVA DE ATUN',
	'01',
	1.50
UNION
SELECT	5,
	'LOMITO DE MERO',
	'01',
	3.00


/* 07: INGRESAR LOS DATOS DE DETALLE PRODUCTO */
INSERT INTO TB_DETALLE_PRODUCTO(
	COD_PRO,
	COD_ESP,
	CAN_PRO
)
SElECT	1,
	1,
	5
UNION
SElECT	1,
	2,
	8
UNION
SElECT	1,
	12,
	8
UNION
SElECT	2,
	3,
	4
UNION
SElECT	2,
	4,
	5
UNION
SElECT	2,
	6,
	7
UNION
SElECT	3,
	9,
	4
UNION
SElECT	3,
	10,
	5
UNION
SElECT	3,
	12,
	10
UNION
SElECT	4,
	16,
	5
UNION
SElECT	5,
	12,
	10

/* 08: FAENA EMPLEADO */
INSERT INTO TB_FAENA_EMPLEADO(
	NUM_FAE,
	COD_EMP
)
SELECT	'00001','0000000001'
UNION
SELECT	'00001','0000000002'
UNION
SELECT	'00001','0000000003'
UNION
SELECT	'00001','0000000004'
UNION
SELECT	'00001','0000000005'
UNION
SELECT	'00002','0000000006'
UNION
SELECT	'00002','0000000007'
UNION
SELECT	'00002','0000000008'
UNION
SELECT	'00002','0000000009'
UNION
SELECT	'00002','0000000010'
UNION
SELECT	'00003','0000000011'
UNION
SELECT	'00003','0000000012'
UNION
SELECT	'00003','0000000013'
UNION
SELECT	'00003','0000000014'
UNION
SELECT	'00003','0000000015'
UNION
SELECT	'00004','0000000016'
UNION
SELECT	'00004','0000000017'
UNION
SELECT	'00004','0000000018'
UNION
SELECT	'00004','0000000019'
UNION
SELECT	'00004','0000000010'
UNION
SELECT	'00005','0000000001'
UNION
SELECT	'00005','0000000002'
UNION
SELECT	'00005','0000000003'
UNION
SELECT	'00005','0000000004'
UNION
SELECT	'00005','0000000005'
UNION
SELECT	'00005','0000000006'
UNION
SELECT	'00005','0000000007'
UNION
SELECT	'00006','0000000008'
UNION
SELECT	'00006','0000000009'
UNION
SELECT	'00006','0000000010'
UNION
SELECT	'00006','0000000011'
UNION
SELECT	'00006','0000000012'
UNION
SELECT	'00006','0000000013'
UNION
SELECT	'00006','0000000014'
UNION
SELECT	'00007','0000000015'
UNION
SELECT	'00007','0000000016'
UNION
SELECT	'00007','0000000017'
UNION
SELECT	'00008','0000000018'
UNION
SELECT	'00008','0000000019'
UNION
SELECT	'00008','0000000020'
UNION
SELECT	'00008','0000000001'
UNION
SELECT	'00008','0000000002'
UNION
SELECT	'00009','0000000003'
UNION
SELECT	'00009','0000000004'
UNION
SELECT	'00010','0000000005'
UNION
SELECT	'00010','0000000006'
UNION
SELECT	'00011','0000000007'
UNION
SELECT	'00011','0000000008'
UNION
SELECT	'00011','0000000009'
UNION
SELECT	'00012','0000000010'
UNION
SELECT	'00012','0000000011'
UNION
SELECT	'00012','0000000012'
UNION
SELECT	'00013','0000000013'
UNION
SELECT	'00013','0000000014'
UNION
SELECT	'00013','0000000015'
UNION
SELECT	'00013','0000000016'
UNION
SELECT	'00013','0000000017'
UNION
SELECT	'00013','0000000018'

--------  LISTANDO LAS TABLAS -----------------
SELECT * FROM TB_BARCO
SELECT * FROM TB_EMPLEADO
SELECT * FROM TB_ESPECIE
SELECT * FROM TB_FAENA
SELECT * FROM TB_PRODUCTO
SELECT * FROM TB_CATEGORIA_EMPLEADO
SELECT * FROM TB_DETALLE_FAENA
SELECT * FROM TB_DETALLE_PRODUCTO
SELECT * FROM TB_ESTADO_CIVIL
SELECT * FROM TB_FAENA_EMPLEADO
SELECT * FROM TB_TIPO_BARCO
SELECT * FROM TB_TIPO_PRODUCTO
-----------------------------------------------
